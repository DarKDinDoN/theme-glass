!function(){"use strict";const e={MODULE_NAME:"theme-glass",MODULE_TITLE:"Theme: Glass"};e.PATH=`modules/${e.MODULE_NAME}/`;class t extends FormApplication{COMPONENTS={logo:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.HIDE_INTERFACE_FORM}.logo`),navigation:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.HIDE_INTERFACE_FORM}.navigation`),controls:game.i18n.localize("CONTROLS.NavLabel"),players:game.i18n.localize("PLAYERS.Title"),hotbar:game.i18n.localize("DOCUMENT.Macros"),chat:game.i18n.localize("THESIDEBAR.ChatLogTitle"),combat:game.i18n.localize("THESIDEBAR.CombatTrackerTitle"),scenes:game.i18n.localize("THESIDEBAR.ScenesTitle"),actors:game.i18n.localize("THESIDEBAR.ActorDirectoryTitle"),items:game.i18n.localize("THESIDEBAR.ItemDirectoryTitle"),journal:game.i18n.localize("THESIDEBAR.JournalEntryTitle"),tables:game.i18n.localize("THESIDEBAR.RollableTablesTitle"),cards:game.i18n.localize("THESIDEBAR.CardStacksTitle"),playlists:game.i18n.localize("THESIDEBAR.PlaylistsTitle"),compendium:game.i18n.localize("THESIDEBAR.CompendiumPacksTitle"),settings:game.i18n.localize("THESIDEBAR.SettingsTitle")};DEFAULTS={logo:{player:!0,gm:!0},navigation:{player:!0,gm:!0},controls:{player:!0,gm:!0},players:{player:!0,gm:!0},hotbar:{player:!0,gm:!0},chat:{player:!0,gm:!0},combat:{player:!0,gm:!0},scenes:{player:!0,gm:!0},actors:{player:!0,gm:!0},items:{player:!0,gm:!0},journal:{player:!0,gm:!0},tables:{player:!0,gm:!0},cards:{player:!0,gm:!0},playlists:{player:!0,gm:!0},compendium:{player:!0,gm:!0},settings:{player:!0,gm:!0}};static register(){game.settings.registerMenu(e.MODULE_NAME,s.HIDE_INTERFACE_FORM,{label:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.HIDE_INTERFACE_FORM}.menu`),icon:"fas fa-eye",type:t,restricted:!0}),game.settings.register(e.MODULE_NAME,s.HIDE_INTERFACE_VALUES,{scope:"world",config:!1,default:null,type:String,onChange:()=>debouncedReload()})}static get defaultOptions(){return mergeObject(super.defaultOptions,{...super.defaultOptions,template:`${e.PATH}templates/hide-interface-settings.hbs`,title:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.HIDE_INTERFACE_FORM}.title`),width:400,id:`${e.MODULE_NAME}-${s.HIDE_INTERFACE_FORM}`})}getData(){let t=super.getData();t.components=this.COMPONENTS;const a=game.settings.get(e.MODULE_NAME,s.HIDE_INTERFACE_VALUES);return t.values=JSON.parse(a)??this.DEFAULTS,t}_updateObject(t,a){const n=expandObject(a);game.settings.set(e.MODULE_NAME,s.HIDE_INTERFACE_VALUES,JSON.stringify(n))}}const a=foundry.utils.debounce((()=>window.location.reload()),500),s={ENABLE_BLUR:"enable-blur",CHAT_OPACITY:"chat-opacity",CHAT_OPACITY_VALUE:"chat-opacity-value",CHAT_OPACITY_TIMER:"chat-opacity-timer",COLLAPSE_HOTBAR:"collapse-hotbar",NO_PAUSE:"no-pause",REDUCE_SCENE_LIST:"reduce-scene-list",HIDE_INTERFACE_FORM:"hide-interface-form",HIDE_INTERFACE_VALUES:"hide-interface-values"};class n{hookName="";once=!1;byPassSetting=null;settingName="";onHook(){if(!this.hookName)throw new Error("Missing hook definition");Hooks.on(this.hookName,this.handle.bind(this),{once:this.once})}handle(...t){this.setting=this.byPassSetting??game.settings.get(e.MODULE_NAME,s[this.settingName]),this.setting&&this.fireFeature(...t)}fireFeature(...e){}}class i extends n{settingName="ENABLE_BLUR";hookName="ready";once=!0;fireFeature(){document.body.classList.add("addBlur")}}class o extends n{byPassSetting=!0;hookName="ready";once=!0;fireFeature(){if(document.body.addEventListener("click",(async t=>{(t.target.classList.contains("glass-theme-blur-message")||t.target.parentNode.classList.contains("glass-theme-blur-message"))&&((new SettingsConfig).render(!0),await new Promise((e=>setTimeout(e,100))).then((()=>ui.activeWindow.activateTab(e.MODULE_NAME))))})),!game.user.getFlag(e.MODULE_NAME,"blurWarningMessageShown")){const t=[`\n          <div>\n            <h3>Theme: Glass</h3>\n            <p>${game.i18n.localize(`${e.MODULE_NAME}.blurWarningMessage`)}</p>\n            <p>\n              <button type="button" class="glass-theme-blur-message" data-key="theme-glass.enable-blur">\n                <i class="fas fa-cogs"></i> ${game.i18n.localize("SETTINGS.Configure")}\n              </button>\n            </p>\n          </div>\n        `].map((e=>({whisper:[game.user.id],speaker:{alias:"Theme: Glass"},flags:{core:{canPopout:!0}},content:e})));ChatMessage.implementation.createDocuments(t),game.user.setFlag(e.MODULE_NAME,"blurWarningMessageShown",!0)}}}class l extends n{settingName="CHAT_OPACITY";hookName="ready";once=!0;fireFeature(){document.body.classList.add("addChatOpacity"),document.documentElement.style.setProperty("--chat-opactity-value",game.settings.get(e.MODULE_NAME,s.CHAT_OPACITY_VALUE)),document.querySelectorAll("#chat-log li.chat-message").forEach((e=>e.classList.add("opacity-transition"))),this.handleNewChatCards()}handleNewChatCards(){Hooks.on("renderChatMessage",(async(t,a)=>{a[0].classList.add("opacity-delay");const n=1e3*game.settings.get(e.MODULE_NAME,s.CHAT_OPACITY_TIMER);await new Promise((e=>setTimeout(e,n))).then((()=>{a[0].classList.add("opacity-transition"),a[0].classList.remove("opacity-delay")}))}))}}class E extends n{settingName="COLLAPSE_HOTBAR";hookName="renderHotbar";once=!0;fireFeature(){ui.hotbar.collapse()}}class g extends n{byPassSetting=!0;hookName="ready";once=!0;fireFeature(){const t=JSON.parse(game.settings.get(e.MODULE_NAME,s.HIDE_INTERFACE_VALUES));if(!t)return;const a=game.user.isGM?"gm":"player";for(const[e,s]of Object.entries(t))s[a]||document.body.classList.add(`hide${e.charAt(0).toUpperCase()+e.slice(1)}`)}}class r extends n{settingName="REDUCE_SCENE_LIST";hookName="renderSceneDirectory";fireFeature(){document.body.classList.add("reduceScenesHeight")}}class c extends n{settingName="NO_PAUSE";hookName="ready";once=!0;fireFeature(){game.users.current.isGM&&game.paused&&game.togglePause(!1,!0)}}new class{constructor(){this.init(),this.loadFeatures()}init(){Hooks.once("init",(()=>{console.log(`${e.MODULE_TITLE} | Initializing module`),game.settings.register(e.MODULE_NAME,s.ENABLE_BLUR,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.ENABLE_BLUR}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.ENABLE_BLUR}-hint`),scope:"client",config:!0,default:!0,type:Boolean,onChange:()=>a()}),game.settings.register(e.MODULE_NAME,s.CHAT_OPACITY,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.CHAT_OPACITY}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.CHAT_OPACITY}-hint`),scope:"world",config:!0,default:!0,type:Boolean,onChange:()=>a()}),game.settings.register(e.MODULE_NAME,s.CHAT_OPACITY_VALUE,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.CHAT_OPACITY_VALUE}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.CHAT_OPACITY_VALUE}-hint`),scope:"world",config:!0,default:.5,range:{min:.25,max:.75,step:.25},type:Number,onChange:()=>a()}),game.settings.register(e.MODULE_NAME,s.CHAT_OPACITY_TIMER,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.CHAT_OPACITY_TIMER}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.CHAT_OPACITY_TIMER}-hint`),scope:"world",config:!0,default:10,range:{min:1,max:30,step:1},type:Number,onChange:()=>a()}),game.settings.register(e.MODULE_NAME,s.COLLAPSE_HOTBAR,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLLAPSE_HOTBAR}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.COLLAPSE_HOTBAR}-hint`),scope:"world",config:!0,default:!1,type:Boolean,onChange:()=>a()}),game.settings.register(e.MODULE_NAME,s.NO_PAUSE,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.NO_PAUSE}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.NO_PAUSE}-hint`),scope:"world",config:!0,default:!1,type:Boolean,onChange:()=>a()}),game.settings.register(e.MODULE_NAME,s.REDUCE_SCENE_LIST,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.REDUCE_SCENE_LIST}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${s.REDUCE_SCENE_LIST}-hint`),scope:"world",config:!0,default:!1,type:Boolean,onChange:()=>a()}),t.register()}))}loadFeatures(){[new i,new o,new l,new E,new g,new r,new c].forEach((e=>e.onHook()))}}}();