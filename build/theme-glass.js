!function(){"use strict";const e={MODULE_NAME:"theme-glass",MODULE_TITLE:"Theme: Glass"};e.PATH=`modules/${e.MODULE_NAME}/`;const t=foundry.utils.debounce((()=>window.location.reload()),500),a={ENABLE_BLUR:"enable-blur",CHAT_OPACITY:"chat-opacity",CHAT_OPACITY_VALUE:"chat-opacity-value",CHAT_OPACITY_TIMER:"chat-opacity-timer",COLLAPSE_HOTBAR:"collapse-hotbar",NO_PAUSE:"no-pause",HIDE_LOGO:"hide-logo",REDUCE_SCENE_LIST:"reduce-scene-list"};class s{hookName="";byPassSetting=null;settingName="";onHook(){if(!this.hookName)throw new Error("Missing hook definition");Hooks.once(this.hookName,this.handle.bind(this))}handle(){this.setting=this.byPassSetting??game.settings.get(e.MODULE_NAME,a[this.settingName]),this.setting&&this.fireFeature()}fireFeature(){}}class n extends s{settingName="ENABLE_BLUR";hookName="ready";fireFeature(){document.body.classList.add("shouldBlur")}}class i extends s{byPassSetting=!0;hookName="ready";fireFeature(){if(document.body.addEventListener("click",(async t=>{(t.target.classList.contains("glass-theme-blur-message")||t.target.parentNode.classList.contains("glass-theme-blur-message"))&&((new SettingsConfig).render(!0),await new Promise((e=>setTimeout(e,100))).then((()=>ui.activeWindow.activateTab(e.MODULE_NAME))))})),!game.user.getFlag(e.MODULE_NAME,"blurWarningMessageShown")){const t=[`\n          <div>\n            <h3>Theme: Glass</h3>\n            <p>${game.i18n.localize(`${e.MODULE_NAME}.blurWarningMessage`)}</p>\n            <p>\n              <button type="button" class="glass-theme-blur-message" data-key="theme-glass.enable-blur">\n                <i class="fas fa-cogs"></i> ${game.i18n.localize("SETTINGS.Configure")}\n              </button>\n            </p>\n          </div>\n        `].map((e=>({whisper:[game.user.id],speaker:{alias:"Theme: Glass"},flags:{core:{canPopout:!0}},content:e})));ChatMessage.implementation.createDocuments(t),game.user.setFlag(e.MODULE_NAME,"blurWarningMessageShown",!0)}}}class o extends s{settingName="CHAT_OPACITY";hookName="ready";fireFeature(){document.body.classList.add("addChatOpacity"),document.documentElement.style.setProperty("--chat-opactity-value",game.settings.get(e.MODULE_NAME,a.CHAT_OPACITY_VALUE)),document.querySelectorAll("#chat-log li.chat-message").forEach((e=>e.classList.add("opacity-transition"))),this.handleNewChatCards()}handleNewChatCards(){Hooks.on("renderChatMessage",(async(t,s)=>{s[0].classList.add("opacity-delay");const n=1e3*game.settings.get(e.MODULE_NAME,a.CHAT_OPACITY_TIMER);await new Promise((e=>setTimeout(e,n))).then((()=>{s[0].classList.add("opacity-transition"),s[0].classList.remove("opacity-delay")}))}))}}class g extends s{settingName="COLLAPSE_HOTBAR";hookName="renderHotbar";fireFeature(){ui.hotbar.collapse()}}class l extends s{settingName="HIDE_LOGO";hookName="ready";fireFeature(){document.body.classList.add("hideLogo")}}class E extends s{settingName="REDUCE_SCENE_LIST";hookName="ready";fireFeature(){document.body.classList.add("changeScenesHeight")}}class c extends s{settingName="NO_PAUSE";hookName="ready";fireFeature(){game.users.current.isGM&&game.paused&&game.togglePause(!1,!0)}}new class{constructor(){this.init(),this.loadFeatures()}init(){Hooks.once("init",(()=>{console.log(`${e.MODULE_TITLE} | Initializing module`),game.settings.register(e.MODULE_NAME,a.ENABLE_BLUR,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.ENABLE_BLUR}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.ENABLE_BLUR}-hint`),scope:"client",config:!0,default:!0,type:Boolean,onChange:()=>t()}),game.settings.register(e.MODULE_NAME,a.CHAT_OPACITY,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.CHAT_OPACITY}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.CHAT_OPACITY}-hint`),scope:"world",config:!0,default:!0,type:Boolean,onChange:()=>t()}),game.settings.register(e.MODULE_NAME,a.CHAT_OPACITY_VALUE,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.CHAT_OPACITY_VALUE}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.CHAT_OPACITY_VALUE}-hint`),scope:"world",config:!0,default:.5,range:{min:.25,max:.75,step:.25},type:Number,onChange:()=>t()}),game.settings.register(e.MODULE_NAME,a.CHAT_OPACITY_TIMER,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.CHAT_OPACITY_TIMER}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.CHAT_OPACITY_TIMER}-hint`),scope:"world",config:!0,default:10,range:{min:1,max:30,step:1},type:Number,onChange:()=>t()}),game.settings.register(e.MODULE_NAME,a.COLLAPSE_HOTBAR,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.COLLAPSE_HOTBAR}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.COLLAPSE_HOTBAR}-hint`),scope:"world",config:!0,default:!1,type:Boolean,onChange:()=>t()}),game.settings.register(e.MODULE_NAME,a.NO_PAUSE,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.NO_PAUSE}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.NO_PAUSE}-hint`),scope:"world",config:!0,default:!1,type:Boolean,onChange:()=>t()}),game.settings.register(e.MODULE_NAME,a.HIDE_LOGO,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.HIDE_LOGO}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.HIDE_LOGO}-hint`),scope:"world",config:!0,default:!1,type:Boolean,onChange:()=>t()}),game.settings.register(e.MODULE_NAME,a.REDUCE_SCENE_LIST,{name:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.REDUCE_SCENE_LIST}-name`),hint:game.i18n.localize(`${e.MODULE_NAME}.settings.${a.REDUCE_SCENE_LIST}-hint`),scope:"world",config:!0,default:!1,type:Boolean,onChange:()=>t()})}))}loadFeatures(){[new i,new n,new o,new g,new c,new l,new E].forEach((e=>e.onHook()))}}}();